<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>ブロードキャストメッセージ</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../assets/css/default.css" type="text/css" />
  <script src="../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page detailing the dope sheet" />
  <meta name="rh-index-keywords" content="Sequences - Broadcast Messages, Moments" />
  <meta name="search-keywords" content="broadcast,messages,broadcast messages,moments" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>ブロードキャストメッセージ</h1>
  <p><a href="../Sequences.htm">シーケンスと</a> <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprites.htm">スプライトは</a>、その長さに沿った任意の時点で<strong>ブロードキャストメッセージと</strong>呼ばれるものを生成できます。<span class="notranslate">strings</span> これらのメッセージは単純なもので、アニメーション<span class="notranslate">timeline</span> の特定のフレームに追加され、<span class="notranslate">timeline</span> のそのポイントに達すると、<span class="notranslate">string</span> がそれをリッスンしているすべてのインスタンスにブロードキャスト送信されます。<a href="../Object_Properties/Other_Events.htm">Broadcast Message Event</a>(「<strong>Other</strong>」イベントカテゴリにあります) を持つインスタンスは、<span class="notranslate">string</span> に到達したときにメッセージ<span class="notranslate">timeline</span> を受け取ります。この時点で、それを解析して適切に反応するコードを用意するかどうかは、あなたにかかっています。<span class="notranslate">sequences</span> もブロードキャスト・メッセージを聞くことができますが、そのためにはまずコードを使ってリスナー・メソッドをセットアップする必要があります（詳しくは<span class="notranslate">GML</span> の<a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sequences/Sequence_Events_Moments_Broadcast.htm">Sequence Events And Moments</a>のセクションを参照してください）。</p>
  <p class="note"><strong><span class="note">注意</span></strong>インスタンスの<strong>image_index </strong>を直接フレームに設定しても、オブジェクトのそのフレームに存在する可能性のある Broadcast Messages はトリガーさ<em>れません</em>。<span class="notranslate">sprite</span> 。</p>
  <p><span class="notranslate">sequence</span> または<span class="notranslate">sprite</span> <span class="notranslate">timeline</span> に放送メッセージを追加するには、<img> のボタンをクリックするだけです。ダイアログが表示され、放送するメッセージを追加することができます。</p>
  <p class="dropspot"><img alt="Broadcast Message Button Icon" class="icon" src="../../assets/Images/Icons/Icon_Broadcast.png" /></p>
  <p>追加されたメッセージは、<span class="notranslate">Dope Sheet</span> （または<span class="notranslate">sprite</span> のフレームビューに表示されます）。編集するには、メッセージアイコンの上でマウスの右ボタン<img> をクリックして、フレームに重なっているすべてのメッセージのリストを開く必要があります（1つのフレームには1つのメッセージしか表示できませんが、複数のメッセージを連続して配置すると視覚的に重なり、目的のメッセージを選択しにくくなりますし、同じフレームにメッセージと<a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sequences/Sequence_Events_Moments_Broadcast.htm">モーメントが</a>あることもあります）、このリストの中から1つを選択するとメッセージダイアログが開き、編集や削除が可能です。</p>
  <p>Broadcast Message イベントがトリガーされると、特別な<a href="../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm">DS Map</a>が作成され、組み込み変数 <span class="inline">event_data</span> に格納されます。この変数IDは組み込みの<em>グローバル </em>スコープ変数ですが、トリガーとなったイベント（この場合はBroadcast Messageイベント）においてのみDSマップデータを含み、それ以外のときは-1を返します。このイベントが持つキーは以下の通りです。</p>
  <table>
    <colgroup>
      <col />
      <col />
      <col />
    </colgroup>
    <tbody>
      <tr>
        <th colspan="3"><span data-keyref="Type_Struct_Message_Event"><a data-rhwidget="HyperlinkPopover" href="../../../The_Asset_Editors/Sequence_Properties/Broadcast_Messages.htm">メッセージイベント構造</a></span></th>
      </tr>
      <tr>
        <th>バリアブル</th>
        <th>タイプ</th>
        <th>商品説明</th>
      </tr>
      <tr>
        <td><span class="inline">event_type</span></td>
        <td><span data-keyref="Type_String"><a data-rhwidget="HyperlinkPopover" href="../../../GameMaker_Language/GML_Overview/Data_Types.htm">文字列</a></span></td>
        <td>これは、<span class="notranslate">string</span> から送信されたメッセージの場合、<span class="notranslate">Sequence</span> &quot;<span class="inline">sequence event</span>&quot; となり、<span class="notranslate">Sprite</span> から送信されたメッセージの場合、&quot;<span class="inline">sprite event</span>&quot; となります。</td>
      </tr>
      <tr>
        <td><span class="inline">message</span></td>
        <td><span data-keyref="Type_String"><a data-rhwidget="HyperlinkPopover" href="../../../GameMaker_Language/GML_Overview/Data_Types.htm">文字列</a></span></td>
        <td>受信したメッセージ（<span class="notranslate">string</span> ）が格納されています。</td>
      </tr>
      <tr>
        <td><span class="inline">element_id</span></td>
        <td><span data-keyref="Type_ID_Layer_Element"><a data-rhwidget="HyperlinkPopover" href="../../../GameMaker_Language/GML_Reference/Asset_Management/Rooms/General_Layer_Functions/layer_get_all_elements.htm">レイヤー要素ID</a></span></td>
        <td>メッセージを発生させたレイヤー要素（シーケンス/スプライト/インスタンス）のIDが格納されています。この ID の値を使って、どのような要素がメッセージを発生させたかを関数 <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Rooms/General_Layer_Functions/layer_get_element_type.htm"><span class="inline">layer_get_element_type()</span></a>また、必要に応じて、他の関連する関数を使用して、その関数をターゲットにしたり、サウンドを再生するなどのアクションを実行します。</td>
      </tr>
    </tbody>
  </table>
  <p>なお、あるインスタンスの放送メッセージイベントには、放送メッセージの送信回数に応じて、<span class="notranslate">strings</span> が複数受信されます。そのすべてに対応する必要はなく、異なるインスタンスに異なるブロードキャスト<span class="notranslate">strings</span> をリッスンさせることができます。しかし、同時に受信する可能性のあるメッセージをリスニングしているインスタンスがあるかもしれません。このような場合、イベントは複数回（<em>各メッセージ文字列に対して1回</em>）トリガーされることになります。</p>
  <p>以下は、このイベントの確認方法の一例です。</p>
  <p class="code">if event_data[? &quot;event_type&quot;] == &quot;sequence event&quot; // or you can check &quot;sprite event&quot;<br />
    {<br />
        switch (event_data[? &quot;message&quot;])<br />
        {<br />
            case &quot;hit&quot;:<br />
                audio_play_sound(snd_hit, 0, false);<br />
            break;<br />
    <br />
            case &quot;destroy&quot;:<br />
                sequence_destroy(event_data[? &quot;element_id&quot;]);<br />
            break;<br />
        }<br />
    }
  </p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">戻る<a href="../Sequences.htm">シークエンス</a></div>
        <div style="float:right">次のページ<a href="The_Sequence_Canvas.htm"> <span class="notranslate">Sequence</span> </a>キャンバス</div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright<span class="notranslate">YoYo Games Ltd.</span> 2022 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
Sequences - Broadcast Messages
Broadcast Messages
-->
  <!-- TAGS
sequences_broadcast_messages
-->
</body>
</html>