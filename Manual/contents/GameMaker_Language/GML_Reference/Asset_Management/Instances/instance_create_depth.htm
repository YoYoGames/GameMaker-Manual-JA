<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>インスタンス作成深度</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css" />
  <script src="../../../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page outlining the function instance_create_depth" />
  <meta name="rh-index-keywords" content="instance_create_depth" />
  <meta name="search-keywords" content="instance_create_depth" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>インスタンス作成深度</h1>
  <p>この関数を使うと、指定した<span class="notranslate">object</span> の新しいインスタンスを、<span class="notranslate">room</span> 内の任意の位置に、指定した深さで作成することができます。深度は任意の値で、深度が低いほどカメラに「近く」描かれ、深度が高いほど遠くに描かれます。したがって、深度 -200 のインスタンスは深度 +300 のインスタンスの上に描かれます (例)。</p>
  <p>すべてのインスタンスは<span class="notranslate">room</span> のレイヤー上に<i>なければならない</i>ので、この関数は実際にインスタンスのために<span class="notranslate">room</span> のレイヤーを作成することに注意してください。しかし、これは<i>管理された</i>レイヤー（つまり、あなたがコードや<span class="notranslate">room</span> で作成したものではなく、<span data-keyref="GameMaker Name">GameMaker</span>が自動的に作成したもの）なので、そのレイヤーにはアクセスできません。そのレイヤーにアクセスすることはできず <a href="Instance_Variables/layer.htm"><span class="inline">layer</span></a>インスタンス変数に-1が返されます。</p>
  <p class="note"><span class="important">重要</span>レイヤーの深さの最小値と最大値は、-16000から16000です。この範囲外の深さに配置されたものは<b>描画さ</b>れませんが、すべてのイベントは通常通り実行されます。</p>
  <p>この関数は新しいインスタンスの <a href="Instance_Variables/id.htm"><span class="inline">id</span></a>を返します。これを変数に格納して、そのインスタンスにアクセスするために使用することができます。この関数は、この関数を呼び出したイベントのコードやアクションを続行する<i>前に</i>、作成されるインスタンスの<a href="../../../../The_Asset_Editors/Object_Properties/Object_Events.htm">Create Eventも</a>呼び出すことに注意してください。</p>
  <h2>オプションの構造体</h2>
  <p>最後の引数である<span class="inline2">var_struct</span> はオプションで、新しいインスタンスのための追加変数を含む<span class="notranslate">struct</span> を取ります。</p>
  <p>この<span class="notranslate">struct</span> からの変数は、その Create イベントが実行される<em>前に</em>、その<a href="../../../../The_Asset_Editors/Object_Properties/Object_Variables.htm">Variable Definitions</a>が設定された<em>後に</em>、新しいインスタンスに適用される。</p>
  <p>これは、その<span class="notranslate">struct</span> からの値が、新しいインスタンスの Create イベントで読み取れることを意味します。下部の<strong>例2を</strong>参照してください。</p>
  <p>この<span class="notranslate">struct</span> を通して新しいインスタンスに適用される値は、次のような任意の型にすることができます。 <a href="../../../GML_Overview/Method_Variables.htm"><span class="notranslate">method</span></a>変数も含め、どのようなものでも構いません。<a href="Instance_Variables/Instance_Variables.htm">組み込みの変数も</a>変更可能です。</p>
  <p class="note"><span class="note">注</span> <span class="notranslate">struct</span> の変数は新しいインスタンスに「浅くコピー」されます。つまり、あらゆる配列、<span class="notranslate">structs</span> 、およびその他のリソースは参照によってコピーされ、複製されることはありません。</p>
  <p> </p>
  <h4>構文です。</h4>
  <p class="code">instance_create_depth(x, y, depth, obj);</p>
  <table>
    <tbody>
      <tr>
        <th>論証</th>
        <th>タイプ</th>
        <th>商品説明</th>
      </tr>
      <tr>
        <td><span class="notranslate">x</span></td>
        <td><span data-keyref="Type_Real"><a href="../../../../../GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">リアル</a></span></td>
        <td><span class="notranslate">The x position the object will be created at</span></td>
      </tr>
      <tr>
        <td><span class="notranslate">y</span></td>
        <td><span data-keyref="Type_Real"><a href="../../../../../GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">リアル</a></span></td>
        <td><span class="notranslate">The y position the object will be created at</span></td>
      </tr>
      <tr>
        <td><span class="notranslate">depth</span></td>
        <td><span data-keyref="Type_Real"><a href="../../../../../GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">リアル</a></span></td>
        <td><span class="notranslate">The depth to assign the created instance to</span></td>
      </tr>
      <tr>
        <td><span class="notranslate">obj</span></td>
        <td><span data-keyref="Type_Asset_Object"><a href="../../../../../The_Asset_Editors/Objects.htm" target="_blank">オブジェクト・アセット</a></span></td>
        <td><span class="notranslate">The object index of the object to create an instance of</span></td>
      </tr>
      <tr>
        <td><span class="notranslate">var_struct</span></td>
        <td><span data-keyref="Type_Struct"><a href="../../../../../GameMaker_Language/GML_Overview/Structs.htm" target="_blank">構造</a></span></td>
        <td><span class="notranslate"><span class="optional">OPTIONAL</span> 新しいインスタンスに割り当てる変数を含む構造体</td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h4>リターンです。</h4>
  <p class="code"><span data-keyref="Type_ID_Instance"><a href="../../../../../GameMaker_Language/GML_Reference/Asset_Management/Instances/Instance_Variables/id.htm" target="_blank">Instance ID</a></span></p>
  <p> </p>
  <h4>例1．</h4>
  <p class="code">var inst = instance_create_depth(x, y, -100, obj_Bullet);<br />
    with (inst)<br />
    {<br />
        speed = other.shoot_speed;<br />
        direction = other.image_angle;<br />
    }</p>
  <p>上記のコードでは、<span class="notranslate">object</span> <span class="inline2">obj_bullet</span>の新しいインスタンスを深度<span class="inline2">-100</span>で作成し、そのインスタンス ID を変数に格納しています。そしてこの変数を用いて、 <span class="inline">speed</span> と <span class="inline">direction</span> を新しいインスタンスに割り当てます。</p>
  <p>これは、まずインスタンスを作成し、そのCreateイベントを実行し<em>、</em>その変数に値を代入します。</p>
  <p>Createイベントが実行される<em>前に</em>、いくつかの変数を割り当てたい場合は、以下の例を参照してください。</p>
  <p> </p>
  <h4>例2．</h4>
  <p class="code">var inst = instance_create_depth(x, y, -100, obj_bullet,<br />
    {<br />
        speed : shoot_speed,<br />
        direction : image_angle<br />
    });</p>
  <p>上記のコードでは、<span class="inline2">obj_bullet</span> のインスタンスを生成し、最後の引数として<span class="notranslate">struct</span> を渡しています。</p>
  <p>その<span class="notranslate">struct</span> は速度と方向の変数を持っています。これは呼び出したインスタンスからその値を引っ張ってくるので、<span class="inline2">他のものを</span>使う必要はありません。</p>
  <p>これらの変数は、Create イベントが実行される前に新しいインスタンスに適用されます。</p>
  <p><span class="notranslate">struct</span> リテラルに限らず、既存の<span class="notranslate">struct</span> を格納する変数を渡したり、既存の構造体から <a href="../../../GML_Overview/Language_Features/new.htm"><span class="notranslate">new</span></a>から構造体を作成することもできます。 <a href="../../../GML_Overview/Structs.htm#constr"><span class="notranslate">constructor</span></a>.</p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">戻る：<a href="Instances.htm">インスタンス</a></div>
        <div style="float:right">次のページ <a href="instance_destroy.htm"><span class="notranslate">instance_destroy</span></a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright<span class="notranslate">YoYo Games Ltd.</span> 2022 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
instance_create_depth
-->
  <!-- TAGS
instance_create_depth
-->
</body>
</html>